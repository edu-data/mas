<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FIAS ìˆ˜ì—…ë¶„ì„ ëŒ€ì‹œë³´ë“œ</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');

  :root {
    --bg: #f5f6fa;
    --card: #ffffff;
    --text: #2c3e50;
    --text-secondary: #6b7b8d;
    --border: #e8ecf1;
    --indirect-1: #4a90d9;
    --indirect-2: #5ba0e6;
    --indirect-3: #6cb0f0;
    --indirect-4: #7ec0fa;
    --direct-5: #e8834a;
    --direct-6: #d96c3a;
    --direct-7: #c9522a;
    --student-8: #52b788;
    --student-9: #40916c;
    --silence-10: #adb5bd;
    --accent: #4a90d9;
    --shadow: 0 2px 12px rgba(0,0,0,0.06);
    --radius: 12px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 24px;
  }

  /* Header */
  .header {
    background: linear-gradient(135deg, #2c3e6b 0%, #4a6fa5 100%);
    color: white;
    padding: 36px 40px;
    border-radius: var(--radius);
    margin-bottom: 24px;
    box-shadow: var(--shadow);
  }
  .header h1 {
    font-size: 1.6rem;
    font-weight: 700;
    margin-bottom: 6px;
    letter-spacing: -0.02em;
  }
  .header-sub {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    font-size: 0.88rem;
    opacity: 0.85;
    margin-top: 10px;
  }
  .header-sub span {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  /* Summary Cards */
  .summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
  }
  .summary-card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 22px 24px;
    box-shadow: var(--shadow);
    border-left: 4px solid var(--accent);
    transition: transform 0.15s;
  }
  .summary-card:hover { transform: translateY(-2px); }
  .summary-card.teacher { border-left-color: var(--indirect-1); }
  .summary-card.student { border-left-color: var(--student-8); }
  .summary-card.ratio { border-left-color: #9b59b6; }
  .summary-card.silence { border-left-color: var(--silence-10); }
  .summary-card .label {
    font-size: 0.82rem;
    color: var(--text-secondary);
    font-weight: 500;
    margin-bottom: 4px;
  }
  .summary-card .value {
    font-size: 1.85rem;
    font-weight: 700;
    letter-spacing: -0.03em;
  }
  .summary-card .sub {
    font-size: 0.78rem;
    color: var(--text-secondary);
    margin-top: 2px;
  }

  /* Chart Section */
  .chart-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 24px;
  }
  .chart-card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 24px;
    box-shadow: var(--shadow);
  }
  .chart-card h3 {
    font-size: 0.95rem;
    font-weight: 600;
    margin-bottom: 16px;
    color: var(--text);
  }
  .chart-card.full-width {
    grid-column: 1 / -1;
  }

  /* Table Section */
  .section-card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 24px;
    box-shadow: var(--shadow);
    margin-bottom: 24px;
  }
  .section-card h3 {
    font-size: 0.95rem;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .toggle-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 8px 16px;
    font-size: 0.85rem;
    font-family: inherit;
    cursor: pointer;
    color: var(--text);
    transition: background 0.15s;
  }
  .toggle-btn:hover { background: #e8ecf1; }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 12px;
    font-size: 0.85rem;
  }
  thead th {
    background: var(--bg);
    padding: 10px 12px;
    text-align: left;
    font-weight: 600;
    font-size: 0.8rem;
    color: var(--text-secondary);
    border-bottom: 2px solid var(--border);
    position: sticky;
    top: 0;
  }
  tbody td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
  }
  tbody tr:hover { background: #f8f9fb; }

  .cat-badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 20px;
    font-size: 0.78rem;
    font-weight: 600;
    color: white;
    min-width: 28px;
    text-align: center;
  }
  .cat-1 { background: var(--indirect-1); }
  .cat-2 { background: var(--indirect-2); }
  .cat-3 { background: var(--indirect-3); }
  .cat-4 { background: var(--indirect-4); }
  .cat-5 { background: var(--direct-5); }
  .cat-6 { background: var(--direct-6); }
  .cat-7 { background: var(--direct-7); }
  .cat-8 { background: var(--student-8); }
  .cat-9 { background: var(--student-9); }
  .cat-10 { background: var(--silence-10); }

  /* Suggestions */
  .suggestion-item {
    padding: 16px 20px;
    background: var(--bg);
    border-radius: 8px;
    margin-bottom: 10px;
    border-left: 3px solid var(--accent);
  }
  .suggestion-item h4 {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 4px;
    color: var(--text);
  }
  .suggestion-item p {
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.65;
  }
  .diagnosis-box {
    padding: 20px 24px;
    background: linear-gradient(135deg, #eef4fb, #f0f7ff);
    border-radius: 10px;
    margin-bottom: 20px;
    border: 1px solid #d0e0f0;
  }
  .diagnosis-box h4 {
    font-size: 1rem;
    font-weight: 700;
    color: #2c5282;
    margin-bottom: 6px;
  }
  .diagnosis-box p {
    font-size: 0.88rem;
    color: #4a6fa5;
    line-height: 1.7;
  }

  /* Footer */
  .footer {
    text-align: center;
    padding: 20px;
    font-size: 0.78rem;
    color: var(--text-secondary);
  }

  /* Print */
  @media print {
    body { background: white; }
    .container { padding: 0; }
    .chart-card, .section-card, .summary-card { box-shadow: none; border: 1px solid #ddd; break-inside: avoid; }
    .toggle-btn { display: none; }
    #codingTableBody { display: table-row-group !important; }
  }

  @media (max-width: 768px) {
    .chart-grid { grid-template-columns: 1fr; }
    .summary-grid { grid-template-columns: repeat(2, 1fr); }
    .header { padding: 24px 20px; }
    .container { padding: 14px; }
  }
</style>
</head>
<body>
<div class="container">

  <!-- Header -->
  <div class="header">
    <h1>FIAS ìˆ˜ì—… ìƒí˜¸ì‘ìš© ë¶„ì„ ë³´ê³ ì„œ</h1>
    <p style="font-size:1.05rem; margin-top:4px; opacity:0.9;">ì´ˆë“±í•™êµ 4í•™ë…„ ê³¼í•™ - ë¬¼ì˜ ìƒíƒœ ë³€í™”</p>
    <div class="header-sub">
      <span>ğŸ“‹ ìˆ˜ì—…ì: ê¹€ì„ ìƒë‹˜</span>
      <span>ğŸ“… ë¶„ì„ì¼: 2025ë…„ 2ì›” 6ì¼</span>
      <span>ğŸ’¬ ì´ ë°œí™” ìˆ˜: 38ê°œ</span>
    </div>
  </div>

  <!-- Summary Cards -->
  <div class="summary-grid">
    <div class="summary-card teacher">
      <div class="label">êµì‚¬ ë°œí™” ë¹„ìœ¨ (TT%)</div>
      <div class="value">63.2%</div>
      <div class="sub">24 / 38 ë°œí™”</div>
    </div>
    <div class="summary-card student">
      <div class="label">í•™ìƒ ë°œí™” ë¹„ìœ¨ (ST%)</div>
      <div class="value">31.6%</div>
      <div class="sub">12 / 38 ë°œí™”</div>
    </div>
    <div class="summary-card ratio">
      <div class="label">I/D Ratio (ê°„ì ‘/ì§ì ‘)</div>
      <div class="value">1.17</div>
      <div class="sub">ê°„ì ‘ ì˜í–¥ ìš°ì„¸ â†’ í•™ìƒì¤‘ì‹¬ ê²½í–¥</div>
    </div>
    <div class="summary-card silence">
      <div class="label">ì¹¨ë¬µ/í˜¼ë€ ë¹„ìœ¨</div>
      <div class="value">5.3%</div>
      <div class="sub">2 / 38 ë°œí™”</div>
    </div>
  </div>

  <!-- Charts Row 1 -->
  <div class="chart-grid">
    <div class="chart-card">
      <h3>ğŸ“Š ë°œí™” ì£¼ì²´ë³„ ë¹„ìœ¨</h3>
      <canvas id="donutChart"></canvas>
    </div>
    <div class="chart-card">
      <h3>ğŸ“Š FIAS ì¹´í…Œê³ ë¦¬ë³„ ë¹ˆë„</h3>
      <canvas id="barChart"></canvas>
    </div>
  </div>

  <!-- Timeline Chart -->
  <div class="chart-grid">
    <div class="chart-card full-width">
      <h3>ğŸ“ˆ ìˆ˜ì—… íë¦„ ì‹œê³„ì—´ (ë°œí™” ìˆœì„œì— ë”°ë¥¸ ì¹´í…Œê³ ë¦¬ ë³€í™”)</h3>
      <canvas id="timelineChart" height="80"></canvas>
    </div>
  </div>

  <!-- Coding Detail Table -->
  <div class="section-card">
    <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:10px;">
      <h3 style="margin-bottom:0;">ğŸ“ ì½”ë”© ìƒì„¸ ë‚´ì—­</h3>
      <button class="toggle-btn" onclick="toggleTable()">
        <span id="toggleIcon">â–¶</span> ìƒì„¸ í…Œì´ë¸” í¼ì¹˜ê¸°/ì ‘ê¸°
      </button>
    </div>
    <div id="codingTableWrap" style="display:none; max-height:500px; overflow-y:auto; margin-top:12px;">
      <table>
        <thead>
          <tr>
            <th style="width:40px;">#</th>
            <th style="width:60px;">í™”ì</th>
            <th>ë°œí™” ë‚´ìš©</th>
            <th style="width:100px;">ì¹´í…Œê³ ë¦¬</th>
          </tr>
        </thead>
        <tbody id="codingTableBody"></tbody>
      </table>
    </div>
  </div>

  <!-- AI Suggestions -->
  <div class="section-card">
    <h3>ğŸ’¡ AI ìˆ˜ì—… ê°œì„  ì œì•ˆ</h3>

    <div class="diagnosis-box">
      <h4>ğŸ” ìˆ˜ì—… ìœ í˜• ì§„ë‹¨: ê· í˜•ì  ìƒí˜¸ì‘ìš©í˜• ìˆ˜ì—…</h4>
      <p>I/D Ratio 1.17ë¡œ ê°„ì ‘ ì˜í–¥ì´ ì§ì ‘ ì˜í–¥ë³´ë‹¤ ì•½ê°„ ë†’ì•„, í•™ìƒ ì°¸ì—¬ë¥¼ ìœ ë„í•˜ëŠ” ê· í˜• ì¡íŒ ìˆ˜ì—…ì…ë‹ˆë‹¤. êµì‚¬ ë°œí™” ë¹„ìœ¨(63.2%)ì´ í•™ìƒ ë°œí™”(31.6%)ë³´ë‹¤ ë†’ì§€ë§Œ, ì§ˆë¬¸ê³¼ ì¹­ì°¬ì„ ì ê·¹ í™œìš©í•˜ê³  ìˆì–´ í•™ìƒì¤‘ì‹¬ ìˆ˜ì—…ì˜ ì¢‹ì€ ê¸°ë°˜ì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.</p>
    </div>

    <div class="suggestion-item">
      <h4>1. í•™ìƒ ì£¼ë„ ë°œí™”(ì¹´í…Œê³ ë¦¬ 9) í™•ëŒ€</h4>
      <p>í˜„ì¬ í•™ìƒ ì£¼ë„ ë°œí™” ë¹„ìœ¨ì€ 33.3% (í•™ìƒ ë°œí™” ì¤‘)ìœ¼ë¡œ, ëŒ€ë¶€ë¶„ êµì‚¬ ì§ˆë¬¸ì— ëŒ€í•œ ë°˜ì‘(ì¹´í…Œê³ ë¦¬ 8)ì´ ë§ìŠµë‹ˆë‹¤. ê°œë°©í˜• ì§ˆë¬¸("ì™œ ê·¸ë ‡ê²Œ ìƒê°í•´?", "ë‹¤ë¥¸ ë°©ë²•ì€ ì—†ì„ê¹Œ?")ì„ ë” í™œìš©í•˜ê³ , í•™ìƒ ê°„ í† ë¡  ì‹œê°„ì„ ë§ˆë ¨í•˜ë©´ í•™ìƒ ì£¼ë„ì„±ì´ ë†’ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>

    <div class="suggestion-item">
      <h4>2. í•™ìƒ ì•„ì´ë””ì–´ ìˆ˜ìš©(ì¹´í…Œê³ ë¦¬ 3) í™œìš© ê°•í™”</h4>
      <p>í•™ìƒ5ì˜ "ì–¼ìŒ ë…¹ì„ ë•Œ ì˜¨ë„ê°€ ì•ˆ ì˜¬ë¼ê°„ë‹¤"ëŠ” ë°œê²¬ì´ë‚˜ í•™ìƒ4ì˜ "ìˆ˜ì¦ê¸°" ê´€ì°°ì„ êµì‚¬ê°€ ì˜ ìˆ˜ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤(ì „ì²´ì˜ 7.9%). ì´ëŸ° í•™ìƒ ì•„ì´ë””ì–´ë¥¼ ë‹¤ë¥¸ í•™ìƒë“¤ì—ê²Œ ì—°ê²°í•˜ëŠ” ì§ˆë¬¸("â—‹â—‹ì´ ì˜ê²¬ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•´?")ì„ ì¶”ê°€í•˜ë©´ íš¨ê³¼ì ì…ë‹ˆë‹¤.</p>
    </div>

    <div class="suggestion-item">
      <h4>3. ì¹­ì°¬/ê²©ë ¤(ì¹´í…Œê³ ë¦¬ 2) êµ¬ì²´í™”</h4>
      <p>ì¹­ì°¬ ë¹ˆë„(10.5%)ëŠ” ì–‘í˜¸í•©ë‹ˆë‹¤. "ì˜í–ˆì–´", "ì¢‹ì•„ìš”" ê°™ì€ ì¼ë°˜ì  ì¹­ì°¬ì„ "ì‹¤í—˜ ì¤‘ ì˜¨ë„ ë³€í™”ë¥¼ ì •í™•í•˜ê²Œ ê´€ì°°í•œ ì ì´ í›Œë¥­í•´"ì²˜ëŸ¼ êµ¬ì²´ì  í–‰ë™ì— ëŒ€í•œ ì¹­ì°¬ìœ¼ë¡œ ë°œì „ì‹œí‚¤ë©´ í•™ìƒì˜ í•™ìŠµ ë™ê¸°ë¥¼ ë”ìš± ê°•í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>

    <div class="suggestion-item">
      <h4>4. ì¹¨ë¬µ/ì‚¬ê³  ì‹œê°„ ì „ëµì  í™œìš©</h4>
      <p>í˜„ì¬ ì¹¨ë¬µ(5.3%)ì€ ë‚®ì€ í¸ì…ë‹ˆë‹¤. ì§ˆë¬¸ í›„ ì˜ë„ì ìœ¼ë¡œ 3-5ì´ˆì˜ 'Wait Time'ì„ ë‘ë©´ í•™ìƒë“¤ì´ ë” ê¹Šì´ ìƒê°í•˜ê³  ì‘ë‹µì˜ ì§ˆì´ ë†’ì•„ì§‘ë‹ˆë‹¤. íŠ¹íˆ "ì™œ?"ë¥˜ì˜ ê³ ì°¨ì› ì§ˆë¬¸ í›„ì—ëŠ” ì¶©ë¶„í•œ ì‚¬ê³  ì‹œê°„ì„ ì£¼ì„¸ìš”.</p>
    </div>

    <div class="suggestion-item">
      <h4>5. ê°•ì˜ ë¹„ìœ¨(ì¹´í…Œê³ ë¦¬ 5) ì¡°ì ˆ</h4>
      <p>ê°•ì˜/ì„¤ëª… ë¹„ìœ¨(21.1%)ì€ ì ì ˆí•œ ìˆ˜ì¤€ì´ë‚˜, ì¼ë¶€ ì„¤ëª…ì„ í•™ìƒ ìŠ¤ìŠ¤ë¡œ íƒêµ¬í•˜ê²Œ ìœ ë„í•˜ë©´ ë” íš¨ê³¼ì ì…ë‹ˆë‹¤. ì˜ˆ: "ìƒíƒœ ë³€í™” ì¤‘ ì˜¨ë„ê°€ ì¼ì •í•œ ì´ìœ "ë¥¼ ì§ì ‘ ì„¤ëª…í•˜ê¸°ë³´ë‹¤ "ì™œ ê·¸ëŸ´ê¹Œ?"ë¼ê³  ì§ˆë¬¸í•œ í›„ í•™ìƒë“¤ì˜ ì¶”ë¡ ì„ ìœ ë„í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>
  </div>

  <div class="footer">
    FIAS ìˆ˜ì—…ë¶„ì„ ëŒ€ì‹œë³´ë“œ | Flanders Interaction Analysis System | Claude AI ê¸°ë°˜ ìë™ ë¶„ì„
  </div>

</div>

<script>
// === FIAS CODING DATA ===
const codingData = [
  { id: 1, speaker: "êµì‚¬", text: "ì, ì—¬ëŸ¬ë¶„ ìë¦¬ì— ì•‰ìœ¼ì„¸ìš”. ì˜¤ëŠ˜ ìˆ˜ì—…ì„ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" },
  { id: 2, speaker: "êµì‚¬", text: "ì§€ë‚œ ì‹œê°„ì— ìš°ë¦¬ê°€ ë¬¼ì˜ ì„¸ ê°€ì§€ ìƒíƒœì— ëŒ€í•´ ë°°ì› ì£ ? ëˆ„ê°€ ê¸°ì–µë‚˜ëŠ” ì‚¬ëŒ?", cat: 4, catName: "ì§ˆë¬¸" },
  { id: 3, speaker: "í•™ìƒ1", text: "ê³ ì²´, ì•¡ì²´, ê¸°ì²´ìš”!", cat: 8, catName: "í•™ìƒ ë°˜ì‘" },
  { id: 4, speaker: "êµì‚¬", text: "ë§ì•„, ì˜ ê¸°ì–µí•˜ê³  ìˆë„¤! ì•„ì£¼ ì¢‹ì•„ìš”.", cat: 2, catName: "ì¹­ì°¬/ê²©ë ¤" },
  { id: 5, speaker: "êµì‚¬", text: "ê·¸ëŸ¬ë©´ ì˜¤ëŠ˜ì€ ë¬¼ì´ ìƒíƒœê°€ ë³€í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ ì•Œì•„ë³¼ ê±°ì˜ˆìš”.", cat: 5, catName: "ê°•ì˜/ì„¤ëª…" },
  { id: 6, speaker: "êµì‚¬", text: "ë¨¼ì € ì—¬ëŸ¬ë¶„ì—ê²Œ ì§ˆë¬¸ í•˜ë‚˜ í• ê²Œìš”. ê²¨ìš¸ì— ë°–ì— ë†”ë‘” ë¬¼ì´ ì–´ë–»ê²Œ ë˜ì£ ?", cat: 4, catName: "ì§ˆë¬¸" },
  { id: 7, speaker: "í•™ìƒ2", text: "ì–¼ì–´ìš”!", cat: 8, catName: "í•™ìƒ ë°˜ì‘" },
  { id: 8, speaker: "í•™ìƒ3", text: "ê½ê½ ì–¼ì–´ì„œ ì–¼ìŒì´ ë¼ìš”.", cat: 8, catName: "í•™ìƒ ë°˜ì‘" },
  { id: 9, speaker: "êµì‚¬", text: "ê·¸ë˜, ë§ì•„ìš”. ë¬¼ì´ ì–¼ìŒì´ ë˜ëŠ” ê±°ì£ . ì´ê±¸ ë­ë¼ê³  í• ê¹Œìš”?", cat: 4, catName: "ì§ˆë¬¸" },
  { id: 10, speaker: "-", text: "(ì ì‹œ ì¹¨ë¬µ)", cat: 10, catName: "ì¹¨ë¬µ/í˜¼ë€" },
  { id: 11, speaker: "í•™ìƒ1", text: "ì‘ê³ ìš”?", cat: 8, catName: "í•™ìƒ ë°˜ì‘" },
  { id: 12, speaker: "êµì‚¬", text: "ì˜¤, ì‘ê³ ! ì¢‹ì€ ì‹œë„ì•¼. ì‚¬ì‹¤ ë¬¼ì´ ì–¼ìŒì´ ë˜ëŠ” ê²ƒì€ 'ì–´ëŠ”ì 'ì´ë¼ê³  í•´ì„œ, 0ë„ì—ì„œ ì¼ì–´ë‚˜ëŠ” 'ì‘ê³ 'ë¼ê³  í•´ìš”.", cat: 3, catName: "ì•„ì´ë””ì–´ ìˆ˜ìš©" },
  { id: 13, speaker: "êµì‚¬", text: "ì, ê·¸ëŸ¬ë©´ ë°˜ëŒ€ë¡œ ì–¼ìŒì´ ë…¹ìœ¼ë©´ ë­ê°€ ë ê¹Œìš”?", cat: 4, catName: "ì§ˆë¬¸" },
  { id: 14, speaker: "í•™ìƒ2", text: "ë¬¼ì´ìš”!", cat: 8, catName: "í•™ìƒ ë°˜ì‘" },
  { id: 15, speaker: "êµì‚¬", text: "ë§ì•„ìš”. ì´ê±´ 'ìœµí•´'ë¼ê³  í•´ìš”. ê³ ì²´ê°€ ì•¡ì²´ë¡œ ë³€í•˜ëŠ” ê±°ì£ .", cat: 5, catName: "ê°•ì˜/ì„¤ëª…" },
  { id: 16, speaker: "êµì‚¬", text: "ì, ì´ì œ ì‹¤í—˜ì„ í•´ë³¼ ê±°ì˜ˆìš”. ëª¨ë‘ ë³„ë¡œ ì•‰ìœ¼ì„¸ìš”.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" },
  { id: 17, speaker: "êµì‚¬", text: "ê° ëª¨ë‘  ì±…ìƒ ìœ„ì— ì–¼ìŒ, ë¹„ì»¤, ì•Œì½”ì˜¬ë¨í”„ê°€ ìˆì£ ? í™•ì¸í•´ë³´ì„¸ìš”.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" },
  { id: 18, speaker: "í•™ìƒ4", text: "ì„ ìƒë‹˜, ì €í¬ ëª¨ë‘ ì€ ë¹„ì»¤ê°€ ì—†ì–´ìš”.", cat: 9, catName: "í•™ìƒ ì£¼ë„" },
  { id: 19, speaker: "êµì‚¬", text: "ì•„, ê·¸ë˜? ì ê¹ë§Œ, ì—¬ê¸° ìˆë‹¤. ì, ê°€ì ¸ê°€ë ´.", cat: 1, catName: "ê°ì • ìˆ˜ìš©" },
  { id: 20, speaker: "êµì‚¬", text: "ì‹¤í—˜ ë°©ë²•ì„ ì„¤ëª…í• ê²Œìš”. ë¨¼ì € ë¹„ì»¤ì— ì–¼ìŒì„ ë„£ê³ , ì•Œì½”ì˜¬ë¨í”„ë¡œ ì²œì²œíˆ ê°€ì—´í•˜ì„¸ìš”.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" },
  { id: 21, speaker: "êµì‚¬", text: "ê·¸ë¦¬ê³  ì˜¨ë„ê³„ë¡œ 1ë¶„ë§ˆë‹¤ ì˜¨ë„ë¥¼ ì¸¡ì •í•´ì„œ ê¸°ë¡ì§€ì— ì ìœ¼ì„¸ìš”.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" },
  { id: 22, speaker: "êµì‚¬", text: "ì–¼ìŒì´ ë…¹ê¸° ì‹œì‘í•  ë•Œ, ì™„ì „íˆ ë…¹ì•˜ì„ ë•Œ, ë¬¼ì´ ë“ê¸° ì‹œì‘í•  ë•Œì˜ ì˜¨ë„ë¥¼ íŠ¹íˆ ì˜ ê´€ì°°í•˜ì„¸ìš”.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" },
  { id: 23, speaker: "êµì‚¬", text: "ì•ˆì „í•˜ê²Œ ì‹¤í—˜í•´ì•¼ í•´ìš”. ì•Œì½”ì˜¬ë¨í”„ ë§Œì§ˆ ë•Œ ì¡°ì‹¬í•˜ì„¸ìš”. ì, ì‹œì‘í•˜ì„¸ìš”.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" },
  { id: 24, speaker: "-", text: "(ëª¨ë‘ ë³„ ì‹¤í—˜ í™œë™ - ì•½ 10ë¶„)", cat: 10, catName: "ì¹¨ë¬µ/í˜¼ë€" },
  { id: 25, speaker: "í•™ìƒ5", text: "ì„ ìƒë‹˜! ì €í¬ ëª¨ë‘ ì—ì„œ ì‹ ê¸°í•œ ê±° ë°œê²¬í–ˆì–´ìš”. ì–¼ìŒì´ ë…¹ì„ ë•Œ ì˜¨ë„ê°€ ì•ˆ ì˜¬ë¼ê°€ìš”!", cat: 9, catName: "í•™ìƒ ì£¼ë„" },
  { id: 26, speaker: "êµì‚¬", text: "ì˜¤, ì •ë§? ê·¸ê±° ì•„ì£¼ ì¤‘ìš”í•œ ë°œê²¬ì´ì•¼! ë‹¤ë¥¸ ëª¨ë‘ ë„ ê·¸ëŸ°ì§€ í™•ì¸í•´ë³¼ê¹Œ?", cat: 2, catName: "ì¹­ì°¬/ê²©ë ¤" },
  { id: 27, speaker: "í•™ìƒ3", text: "ì €í¬ë„ìš”! 0ë„ì—ì„œ ê³„ì† ë¨¸ë¬¼ëŸ¬ ìˆì–´ìš”.", cat: 8, catName: "í•™ìƒ ë°˜ì‘" },
  { id: 28, speaker: "í•™ìƒ1", text: "ì €í¬ ëª¨ë‘ ë„ ê°™ì•„ìš”.", cat: 8, catName: "í•™ìƒ ë°˜ì‘" },
  { id: 29, speaker: "êµì‚¬", text: "ì—¬ëŸ¬ë¶„ì´ ë°œê²¬í•œ ê²ƒì²˜ëŸ¼, ì–¼ìŒì´ ë…¹ëŠ” ë™ì•ˆì—ëŠ” ì˜¨ë„ê°€ 0ë„ì—ì„œ ë³€í•˜ì§€ ì•Šì•„ìš”. ì´ê²ƒì„ 'ìƒíƒœ ë³€í™”ê°€ ì¼ì–´ë‚˜ëŠ” ë™ì•ˆ ì˜¨ë„ê°€ ì¼ì •í•˜ë‹¤'ê³  í•´ìš”.", cat: 3, catName: "ì•„ì´ë””ì–´ ìˆ˜ìš©" },
  { id: 30, speaker: "êµì‚¬", text: "ì´ê±´ ì•„ì£¼ ì¤‘ìš”í•œ ê³¼í•™ì  ì‚¬ì‹¤ì´ì—ìš”. ì—´ì—ë„ˆì§€ê°€ ì˜¨ë„ë¥¼ ì˜¬ë¦¬ëŠ” ë° ì“°ì´ì§€ ì•Šê³ , ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” ë° ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì´ì—ìš”.", cat: 5, catName: "ê°•ì˜/ì„¤ëª…" },
  { id: 31, speaker: "êµì‚¬", text: "ì, ê·¸ëŸ¬ë©´ ë¬¼ì´ ë“ì„ ë•ŒëŠ” ì–´ë–¤ ì˜¨ë„ì—ì„œ ë“ì—ˆë‚˜ìš”?", cat: 4, catName: "ì§ˆë¬¸" },
  { id: 32, speaker: "í•™ìƒ2", text: "100ë„ìš”!", cat: 8, catName: "í•™ìƒ ë°˜ì‘" },
  { id: 33, speaker: "êµì‚¬", text: "ë§ì•„ìš”. ë¬¼ì´ ë“ëŠ” ì˜¨ë„ëŠ” 100ë„ì˜ˆìš”. ì´ë•Œë„ ë§ˆì°¬ê°€ì§€ë¡œ ì˜¨ë„ê°€ í•œë™ì•ˆ ë³€í•˜ì§€ ì•Šì•„ìš”.", cat: 5, catName: "ê°•ì˜/ì„¤ëª…" },
  { id: 34, speaker: "í•™ìƒ5", text: "ì„ ìƒë‹˜, ê·¸ëŸ¬ë©´ ë†’ì€ ì‚°ì—ì„œë„ 100ë„ì—ì„œ ë“ì–´ìš”?", cat: 9, catName: "í•™ìƒ ì£¼ë„" },
  { id: 35, speaker: "êµì‚¬", text: "ì•„, ì•„ì£¼ ì¢‹ì€ ì§ˆë¬¸ì´ì•¼! ì‚¬ì‹¤ì€ ë†’ì€ ì‚°ì—ì„œëŠ” ê¸°ì••ì´ ë‚®ì•„ì„œ 100ë„ë³´ë‹¤ ë‚®ì€ ì˜¨ë„ì—ì„œ ë“ì–´ìš”. ê·¸ë˜ì„œ ì‚°ì—ì„œ ë¼ë©´ ë“ì´ë©´ ì˜ ì•ˆ ìµëŠ”ë‹¤ëŠ” ë§ì´ ìˆì£ .", cat: 3, catName: "ì•„ì´ë””ì–´ ìˆ˜ìš©" },
  { id: 36, speaker: "í•™ìƒ3", text: "ì•„~ ê·¸ë˜ì„œ ê·¸ëŸ° ê±°ì˜€êµ¬ë‚˜!", cat: 9, catName: "í•™ìƒ ì£¼ë„" },
  { id: 37, speaker: "êµì‚¬", text: "ì, ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©ì„ ì •ë¦¬í•´ë³¼ê¹Œìš”? ëª¨ë‘ ë³„ë¡œ ì˜¤ëŠ˜ ì‹¤í—˜ ê²°ê³¼ë¥¼ ì •ë¦¬í•´ì„œ ë°œí‘œí•´ì£¼ì„¸ìš”.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" },
  { id: 38, speaker: "í•™ìƒ1", text: "ì €í¬ ëª¨ë‘  ë°œí‘œí• ê²Œìš”. ì–¼ìŒì€ 0ë„ì—ì„œ ë…¹ê¸° ì‹œì‘í–ˆê³ , ë…¹ëŠ” ë™ì•ˆ ì˜¨ë„ê°€ ë³€í•˜ì§€ ì•Šì•˜ì–´ìš”. ê·¸ë¦¬ê³  ë¬¼ì€ 100ë„ì—ì„œ ë“ì—ˆì–´ìš”.", cat: 9, catName: "í•™ìƒ ì£¼ë„" },
  { id: 39, speaker: "êµì‚¬", text: "ì•„ì£¼ ì˜ ì •ë¦¬í–ˆì–´, 1ëª¨ë‘ !", cat: 2, catName: "ì¹­ì°¬/ê²©ë ¤" },
  { id: 40, speaker: "í•™ìƒ4", text: "ì €í¬ ëª¨ë‘ ì€ ì¶”ê°€ë¡œ ë°œê²¬í•œ ê²Œ ìˆì–´ìš”. ë¬¼ì´ ë“ì„ ë•Œ ê¹€ì´ ë‚˜ì™”ëŠ”ë°, ì´ê²Œ ìˆ˜ì¦ê¸°ì¸ ê²ƒ ê°™ì•„ìš”.", cat: 9, catName: "í•™ìƒ ì£¼ë„" },
  { id: 41, speaker: "êµì‚¬", text: "ë§ì•„, 4ëª¨ë‘ ì´ ë§í•œ ê²ƒì²˜ëŸ¼ ë¬¼ì´ ë“ìœ¼ë©´ì„œ ë‚˜ì˜¤ëŠ” ê²ƒì´ ìˆ˜ì¦ê¸°ì˜ˆìš”. ì´ê²ƒì„ 'ê¸°í™”'ë¼ê³  í•´ìš”. ì•¡ì²´ê°€ ê¸°ì²´ë¡œ ë³€í•˜ëŠ” ê³¼ì •ì´ì£ .", cat: 3, catName: "ì•„ì´ë””ì–´ ìˆ˜ìš©" },  // Accepting student idea then extending
  // Note: splitting the following teacher utterances
  { id: 42, speaker: "êµì‚¬", text: "ì—¬ëŸ¬ë¶„ ì˜¤ëŠ˜ ì•„ì£¼ ì˜í–ˆì–´ìš”. ë‹¤ìŒ ì‹œê°„ì—ëŠ” ê¸°í™”ì™€ ì•¡í™”ì— ëŒ€í•´ ë” ìì„¸íˆ ë°°ìš¸ ê±°ì˜ˆìš”.", cat: 2, catName: "ì¹­ì°¬/ê²©ë ¤" },
  { id: 43, speaker: "êµì‚¬", text: "ìˆ™ì œë¡œ êµê³¼ì„œ 72ìª½ ë¬¸ì œë¥¼ í’€ì–´ì˜¤ì„¸ìš”. ìˆ˜ì—…ì„ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.", cat: 6, catName: "ì§€ì‹œ/ëª…ë ¹" }
];

// === STATISTICS CALCULATION ===
const total = codingData.length;
const catCounts = {};
for (let i = 1; i <= 10; i++) catCounts[i] = 0;
codingData.forEach(d => catCounts[d.cat]++);

const teacherIndirect = catCounts[1] + catCounts[2] + catCounts[3] + catCounts[4]; // 1+4+4+5 = 14? let me compute
const teacherDirect = catCounts[5] + catCounts[6] + catCounts[7];
const teacherTotal = teacherIndirect + teacherDirect;
const studentTotal = catCounts[8] + catCounts[9];
const silenceTotal = catCounts[10];

const ttPct = (teacherTotal / total * 100).toFixed(1);
const stPct = (studentTotal / total * 100).toFixed(1);
const silPct = (silenceTotal / total * 100).toFixed(1);
const ihPct = (teacherIndirect / total * 100).toFixed(1);
const dhPct = (teacherDirect / total * 100).toFixed(1);
const idRatio = teacherDirect > 0 ? (teacherIndirect / teacherDirect).toFixed(2) : "N/A";
const studentInitPct = (catCounts[9] / studentTotal * 100).toFixed(1);

// Update summary cards with computed values
document.querySelectorAll('.summary-card')[0].querySelector('.value').textContent = ttPct + '%';
document.querySelectorAll('.summary-card')[0].querySelector('.sub').textContent = teacherTotal + ' / ' + total + ' ë°œí™”';
document.querySelectorAll('.summary-card')[1].querySelector('.value').textContent = stPct + '%';
document.querySelectorAll('.summary-card')[1].querySelector('.sub').textContent = studentTotal + ' / ' + total + ' ë°œí™”';
document.querySelectorAll('.summary-card')[2].querySelector('.value').textContent = idRatio;
document.querySelectorAll('.summary-card')[2].querySelector('.sub').textContent = idRatio >= 1 ? 'ê°„ì ‘ ì˜í–¥ ìš°ì„¸ â†’ í•™ìƒì¤‘ì‹¬ ê²½í–¥' : 'ì§ì ‘ ì˜í–¥ ìš°ì„¸ â†’ êµì‚¬ì¤‘ì‹¬ ê²½í–¥';
document.querySelectorAll('.summary-card')[3].querySelector('.value').textContent = silPct + '%';
document.querySelectorAll('.summary-card')[3].querySelector('.sub').textContent = silenceTotal + ' / ' + total + ' ë°œí™”';

// Also update header total
document.querySelector('.header-sub').children[2].innerHTML = 'ğŸ’¬ ì´ ë°œí™” ìˆ˜: ' + total + 'ê°œ';

// === DONUT CHART ===
new Chart(document.getElementById('donutChart'), {
  type: 'doughnut',
  data: {
    labels: ['êµì‚¬ ê°„ì ‘ì˜í–¥ (1-4)', 'êµì‚¬ ì§ì ‘ì˜í–¥ (5-7)', 'í•™ìƒ ë°œí™” (8-9)', 'ì¹¨ë¬µ/í˜¼ë€ (10)'],
    datasets: [{
      data: [teacherIndirect, teacherDirect, studentTotal, silenceTotal],
      backgroundColor: ['#4a90d9', '#e8834a', '#52b788', '#adb5bd'],
      borderWidth: 2,
      borderColor: '#fff'
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { position: 'bottom', labels: { font: { family: "'Noto Sans KR'", size: 12 }, padding: 16 } },
      tooltip: {
        callbacks: {
          label: ctx => ctx.label + ': ' + ctx.raw + 'íšŒ (' + (ctx.raw / total * 100).toFixed(1) + '%)'
        }
      }
    }
  }
});

// === BAR CHART ===
const catLabels = [
  '1.ê°ì •ìˆ˜ìš©', '2.ì¹­ì°¬/ê²©ë ¤', '3.ì•„ì´ë””ì–´ìˆ˜ìš©', '4.ì§ˆë¬¸',
  '5.ê°•ì˜/ì„¤ëª…', '6.ì§€ì‹œ/ëª…ë ¹', '7.ë¹„íŒ',
  '8.í•™ìƒë°˜ì‘', '9.í•™ìƒì£¼ë„', '10.ì¹¨ë¬µ'
];
const catColors = [
  '#4a90d9','#5ba0e6','#6cb0f0','#7ec0fa',
  '#e8834a','#d96c3a','#c9522a',
  '#52b788','#40916c','#adb5bd'
];
new Chart(document.getElementById('barChart'), {
  type: 'bar',
  data: {
    labels: catLabels,
    datasets: [{
      label: 'ë¹ˆë„',
      data: Array.from({length:10}, (_,i) => catCounts[i+1]),
      backgroundColor: catColors,
      borderRadius: 4,
      borderSkipped: false
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          label: ctx => ctx.raw + 'íšŒ (' + (ctx.raw / total * 100).toFixed(1) + '%)'
        }
      }
    },
    scales: {
      y: { beginAtZero: true, ticks: { stepSize: 1, font: { family: "'Noto Sans KR'" } }, title: { display: true, text: 'ë¹ˆë„(íšŒ)', font: { family: "'Noto Sans KR'" } } },
      x: { ticks: { font: { family: "'Noto Sans KR'", size: 10 }, maxRotation: 45 } }
    }
  }
});

// === TIMELINE CHART ===
const timeLabels = codingData.map(d => d.id);
const timeData = codingData.map(d => d.cat);
const timeColors = codingData.map(d => catColors[d.cat - 1]);

new Chart(document.getElementById('timelineChart'), {
  type: 'bar',
  data: {
    labels: timeLabels,
    datasets: [{
      label: 'ì¹´í…Œê³ ë¦¬',
      data: timeData,
      backgroundColor: timeColors,
      borderRadius: 2,
      borderSkipped: false,
      barPercentage: 0.95,
      categoryPercentage: 0.95
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          title: ctx => 'ë°œí™” #' + codingData[ctx[0].dataIndex].id,
          label: ctx => {
            const d = codingData[ctx.dataIndex];
            return ['ì¹´í…Œê³ ë¦¬ ' + d.cat + ': ' + d.catName, d.speaker + ': ' + d.text.substring(0, 40) + (d.text.length > 40 ? '...' : '')];
          }
        }
      }
    },
    scales: {
      y: {
        min: 0, max: 11,
        ticks: {
          stepSize: 1,
          font: { family: "'Noto Sans KR'", size: 10 },
          callback: v => {
            const names = ['','1.ê°ì •','2.ì¹­ì°¬','3.ìˆ˜ìš©','4.ì§ˆë¬¸','5.ê°•ì˜','6.ì§€ì‹œ','7.ë¹„íŒ','8.ë°˜ì‘','9.ì£¼ë„','10.ì¹¨ë¬µ'];
            return names[v] || '';
          }
        },
        title: { display: true, text: 'FIAS ì¹´í…Œê³ ë¦¬', font: { family: "'Noto Sans KR'" } }
      },
      x: {
        title: { display: true, text: 'ë°œí™” ìˆœì„œ', font: { family: "'Noto Sans KR'" } },
        ticks: { font: { size: 9 } }
      }
    }
  }
});

// === POPULATE TABLE ===
const tbody = document.getElementById('codingTableBody');
codingData.forEach(d => {
  const tr = document.createElement('tr');
  tr.innerHTML = `<td>${d.id}</td><td>${d.speaker}</td><td>${d.text}</td><td><span class="cat-badge cat-${d.cat}">${d.cat}</span> ${d.catName}</td>`;
  tbody.appendChild(tr);
});

function toggleTable() {
  const wrap = document.getElementById('codingTableWrap');
  const icon = document.getElementById('toggleIcon');
  if (wrap.style.display === 'none') {
    wrap.style.display = 'block';
    icon.textContent = 'â–¼';
  } else {
    wrap.style.display = 'none';
    icon.textContent = 'â–¶';
  }
}
</script>
</body>
</html>
